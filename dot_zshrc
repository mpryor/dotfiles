export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="af-magic"
plugins=(
   git
)

export EDITOR="nvim"

source $ZSH/oh-my-zsh.sh

set -o vi

alias k="kubectl"
alias gs="git status"
alias gg="git graph"
alias cm="chezmoi" # Think: config manager...
alias lg="lazygit"
alias reload="source ~/.zshrc"
alias vi="nvim"
alias vim="nvim"
alias ls="eza -alh --color=auto --icons=always --group-directories-first --git"

function checkout() {
   git checkout $(git branch -a | sed "s/remotes\/origin\///" | grep -v HEAD | grep -v "\*" | sort | uniq | fzf)
}

function cleanbranches() {
   git branch --merged | grep -v "\*" | grep -v main | grep -v master | xargs -n 1 git branch -d
}

function zz() {
   cd $(zoxide query -l --exclude $(pwd) $1 | sort -k 1 -n | awk '{print $1}' | fzf)
}

function y() {
   local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
   yazi "$@" --cwd-file="$tmp"
   IFS= read -r -d '' cwd <"$tmp"
   [ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
   rm -f -- "$tmp"
}

function ultimate-plumber() {
   BUFFER="$(up -c "${BUFFER}|")"
   CURSOR=$#BUFFER
}
zle -N ultimate-plumber
bindkey "^|" ultimate-plumber

zle -N y
bindkey "^y" y

eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
eval "$(zoxide init zsh)"
source <(fzf --zsh)
eval "$(atuin init zsh)"
source /home/linuxbrew/.linuxbrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh 
source /home/linuxbrew/.linuxbrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
eval "$(/home/linuxbrew/.linuxbrew/bin/mise activate zsh)"
# vim:ft=bash
